// =============================================================================
// SHARED STYLES FOR BOTH LIGHT AND DARK THEMES
// =============================================================================
// This file contains CSS rules that are identical across themes
// Theme-specific values are handled via CSS custom properties

// =============================================================================
// GLOBAL STYLES (Using Bootstrap RFS)
// =============================================================================

html {
  font-size: 100%; // Keep root font size consistent (browser default, usually 16px)
}

body {
  font-family: $font-family-sans-serif;
  line-height: $line-height-base;
  color: var(--color-body);
  background-color: var(--body-bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  // Font size now handled by Bootstrap RFS - no manual breakpoint scaling
}

// =============================================================================
// ENHANCED TYPOGRAPHY FOR TABLET OPTIMIZATION
// =============================================================================

// Improved paragraph spacing for tablet readability
p {
  margin-bottom: map-get($spacers, 5); // Increased spacing between paragraphs
  
  @include media-breakpoint-up(md) { // Tablet and above
    margin-bottom: map-get($spacers, 6); // Even more spacing on larger screens
  }
}

// Enhanced biography section spacing
#biography {
  p {
    margin-bottom: map-get($spacers, 6); // Generous paragraph spacing
    line-height: $line-height-md;
    
    @include media-breakpoint-up(md) {
      margin-bottom: map-get($spacers, 7);
      line-height: $line-height-base; // Use SASS variable instead of hardcoded 1.7
    }
  }
}

// Enhanced typography for tablet optimization
@include media-breakpoint-up(md) { // Tablet and above
  body {
    line-height: $line-height-base; // Use SASS variable instead of hardcoded 1.8
  }
  
  h1, h2, h3, h4, h5, h6 {
    margin-bottom: map-get($spacers, 5); // More space after headings
  }
  
  h2 {
    margin-bottom: map-get($spacers, 6); // Extra space for section headers
  }
}

// =============================================================================
// NAVIGATION STYLING
// =============================================================================

.navbar {
  background-color: var(--navbar-bg);
  border-bottom: $border-width $border-style var(--navbar-border-color);
  padding: $navbar-padding-y $navbar-padding-x;
  contain: var(--contain-layout);
  
  .nav-link {
    color: var(--navbar-color);
    padding-left: $navbar-nav-link-padding-x;
    padding-right: $navbar-nav-link-padding-x;
    transition: $transition-base;
    text-decoration: none;
    
    &.active,
    &[aria-current="page"] {
      font-weight: $font-weight-bold;
      color: var(--navbar-active-color);
    }
    
    &:hover {
      color: var(--navbar-hover-color);
      text-decoration: none;
    }
    
    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring-color);
      outline-offset: var(--focus-ring-offset);
      border-radius: $border-radius-sm;
    }
  }
}

.navbar-brand {
  font-weight: $font-weight-bold;
  text-decoration: none;
  
  &:hover {
    text-decoration: none;
  }
}

// =============================================================================
// TYPOGRAPHY STYLING
// =============================================================================

h1, h2, h3, h4, h5, h6 {
  font-weight: $headings-font-weight;
  color: var(--color-headings);
}

// Add responsive font sizes for smaller viewports to prevent wrapping
@include media-breakpoint-down(sm) { // Targets viewports <576px (Bootstrap's xs breakpoint)
  h1, .h1 { font-size: rfs-fluid-value(1.8rem); }
  h2, .h2 { font-size: rfs-fluid-value(1.6rem); }
  h3, .h3 { font-size: rfs-fluid-value(1.4rem); }
  h4, .h4 { font-size: rfs-fluid-value(1.2rem); }
  h5, .h5 { font-size: rfs-fluid-value(1.1rem); }
  h6, .h6 { font-size: rfs-fluid-value(0.9rem); }
}

// =============================================================================
// LAYOUT COMPONENTS
// =============================================================================

// Enhanced container system with tablet optimizations
.container-fluid,
.page-layout-full .quarto-title-block .quarto-title-banner {
  max-width: $custom-container-max-width;
  margin-inline: auto;
  padding-inline: $custom-container-padding;
  
  @include media-breakpoint-up(md) {
    padding-inline: map-get($spacers, 6); // More generous padding on tablet+
  }
}

// Remove title from header since we're using custom layout
.quarto-title-block {
  display: none;
}

// Enhanced section spacing with tablet optimizations
.grid {
  margin-bottom: map-get($spacers, 8); // Increased section separation
  gap: map-get($spacers, 6); // Increased default gap
  
  @include media-breakpoint-up(md) {
    margin-bottom: map-get($spacers, 9); // Even more separation on tablet+
    gap: map-get($spacers, 7); // Larger gap on tablet+
  }
}

// =============================================================================
// PORTRAIT AND PROFILE STYLING
// =============================================================================

.portrait {
  width: $portrait-size;
  height: $portrait-size;
  margin-block-end: map-get($spacers, 6);
  margin-inline: auto;
  border-radius: 50%;
  overflow: hidden;
  contain: var(--contain-layout) var(--contain-style);
  
  @include media-breakpoint-up(md) {
    margin-block-end: map-get($spacers, 7);
  }
  
  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
}

.portrait-title {
  text-align: center;
  margin-block-end: map-get($spacers, 6);
  
  @include media-breakpoint-up(md) {
    margin-block-end: map-get($spacers, 8);
  }
  
  h2 {
    margin-block-end: map-get($spacers, 3);
    color: var(--color-headings);
  }
  
  h3 {
    line-height: $line-height-md;
    color: var(--color-headings);
    margin-block-end: map-get($spacers, 2);
    
    a {
      color: var(--color-primary);
      text-decoration: $link-decoration;
      transition: $transition-base;
      
      &:hover {
        color: var(--color-primary-hover);
        text-decoration: $link-hover-decoration;
      }
      
      &:focus-visible {
        outline: var(--focus-ring-width) solid var(--focus-ring-color);
        outline-offset: var(--focus-ring-offset);
        border-radius: $border-radius-sm;
      }
    }
  }
}

// =============================================================================
// NETWORK ICONS STYLING
// =============================================================================

.network-icon {
  text-align: center;
  margin-block-end: map-get($spacers, 5);
  
  ul {
    display: flex;
    justify-content: center;
    list-style: none;
    padding: 0;
    margin: 0;
    gap: map-get($spacers, 3);
    
    li {
      margin-block-end: map-get($spacers, 2);
      
      a {
        color: var(--color-primary);
        text-decoration: none;
        transition: $transition-base, $transition-transform;
        will-change: var(--will-change-transform-color);
        display: inline-block;
        
        &:hover {
          color: var(--color-primary-hover);
          transform: var(--hover-transform);
          text-decoration: none;
        }
        
        &:focus-visible {
          outline: var(--focus-ring-width) solid var(--focus-ring-color);
          outline-offset: var(--focus-ring-offset);
          border-radius: $border-radius-sm;
        }
      }
    }
  }
}

// =============================================================================
// CONTENT SECTIONS
// =============================================================================

// Enhanced featured publications section with better tablet spacing
.featured-publications-section {
  background-color: var(--featured-bg);
  padding-block: map-get($spacers, 8); // Increased padding
  margin-block: map-get($spacers, 8);  // Increased margin
  contain: var(--contain-style);
  
  @include media-breakpoint-up(md) {
    padding-block: map-get($spacers, 9);
    margin-block: map-get($spacers, 9);
  }
  
  ul {
    li {
      margin-bottom: map-get($spacers, 6); // More space between publications
      
      @include media-breakpoint-up(md) {
        margin-bottom: map-get($spacers, 7);
      }
    }
  }
}

// =============================================================================
// CONTACT SECTION STYLING
// =============================================================================

.contact-widget {
  margin-block-start: map-get($spacers, 8);
  
  @include media-breakpoint-up(md) {
    margin-block-start: map-get($spacers, 9);
  }
  
  .grid {
    align-items: flex-start;
  }
}

.contact-info {
  margin-block-start: map-get($spacers, 6);
  
  p {
    display: flex;
    align-items: center;
    margin-block-end: map-get($spacers, 5);
    line-height: $line-height-md;
    
    @include media-breakpoint-up(md) {
      margin-block-end: map-get($spacers, 6);
    }
  }
  
  i {
    color: var(--icon-color);
    margin-inline-end: map-get($spacers, 4);
    min-width: map-get($spacers, 7);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    line-height: 1;
  }
  
  a {
    color: var(--color-primary);
    text-decoration: $link-decoration;
    transition: $transition-base;
    line-height: $line-height-md;
    
    &:hover {
      color: var(--color-primary-contact-hover);
      text-decoration: $link-hover-decoration;
    }
    
    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring-color);
      outline-offset: var(--focus-ring-offset);
      border-radius: $border-radius-sm;
    }
  }
  
  .office-hours {
    display: flex;
    align-items: flex-start;
    
    br + * {
      line-height: $line-height-md;
    }
  }
}

// =============================================================================
// FORM STYLING
// =============================================================================

.form-group {
  margin-block-end: $form-group-margin-bottom;
  
  .form-control {
    border-radius: $input-border-radius;
    width: 100%;
    background-color: var(--input-bg);
    border-color: var(--input-border-color);
    color: var(--color-body);
    padding: $input-padding-y $input-padding-x;
    transition: $transition-base;
    border: $border-width $border-style var(--input-border-color);
    
    // Enhanced placeholder styling for dark mode
    &::placeholder {
      color: var(--color-text-muted);
      opacity: 0.7;
    }
    
    &:focus {
      border-color: var(--input-focus-border-color);
      box-shadow: var(--input-focus-box-shadow);
      outline: none;
      background-color: var(--input-bg);
    }
    
    &:focus-visible {
      outline: var(--focus-ring-width) solid var(--focus-ring-color);
      outline-offset: var(--focus-ring-offset);
      border-radius: $border-radius-sm;
    }
  }
}

.btn-outline-primary {
  border-radius: $btn-border-radius;
  padding: $btn-padding-y $btn-padding-x;
  transition: $transition-base;
  text-decoration: none;
  background-color: transparent;
  border: $border-width $border-style var(--color-primary);
  color: var(--color-primary);
  font-weight: $btn-font-weight;
  
  &:hover {
    background-color: var(--color-primary);
    color: var(--body-bg);
    border-color: var(--color-primary);
    text-decoration: none;
  }
  
  &:focus,
  &:focus-visible {
    background-color: var(--color-primary);
    color: var(--body-bg);
    border-color: var(--color-primary);
    box-shadow: var(--btn-focus-box-shadow);
    outline: none;
  }
}

// =============================================================================
// CSS CUSTOM PROPERTIES FOR SHARED VALUES
// =============================================================================

:root {
  // Animation system with accessibility support
  --hover-transform: scale(1.1);
  --transition-duration: 0.15s;
  --transition-timing: ease;
  
  // Performance optimization with modern CSS features
  --contain-layout: layout;
  --contain-style: style;
  --contain-size: size;
  --contain-paint: paint;
  --will-change-transform-color: #{$will-change-transform-color};
  --will-change-transform: #{$will-change-transform};
  
  // Focus ring system
  --focus-ring-width: #{$focus-ring-width};
  --focus-ring-blur: #{$focus-ring-blur};
  --focus-ring-opacity: #{$focus-ring-opacity};
  --focus-ring-offset: #{$focus-ring-offset};
  
  // Modern CSS logical properties support
  --border-inline-start-width: #{$border-width};
  --border-inline-end-width: #{$border-width};
  --border-block-start-width: #{$border-width};
  --border-block-end-width: #{$border-width};
}

// =============================================================================
// ACCESSIBILITY MEDIA QUERIES (SHARED)
// =============================================================================

// Accessibility: Respect user's motion preferences
@media (prefers-reduced-motion: reduce) {
  :root {
    --transition-duration: 0.01ms;
    --hover-transform: none;
  }
  
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// Accessibility: High contrast support
@media (prefers-contrast: high) {
  :root {
    --focus-ring-opacity: 1;
    --focus-ring-width: 3px;
  }
}

// Enhanced color scheme support
@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
  }
}

@media (prefers-color-scheme: light) {
  :root {
    color-scheme: light;
  }
}

// =============================================================================
// ACCESSIBILITY ENHANCEMENTS
// =============================================================================

// High contrast mode adjustments
@media (prefers-contrast: high) {
  .navbar .nav-link:focus-visible,
  .portrait-title a:focus-visible,
  .network-icon a:focus-visible,
  .contact-info a:focus-visible {
    outline-width: 3px;
    outline-style: solid;
    outline-color: var(--color-primary);
  }
} 